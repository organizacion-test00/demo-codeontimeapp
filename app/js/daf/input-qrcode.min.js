/*!
* Data Aquarium Framework  - Universal Input / QR Code 
* Copyright 2021 Code On Time LLC; Licensed MIT; http://codeontime.com/license
*/
(function(){function f(n){return n.length!==6||n.match(/^(salmon|tomato|orange|yellow|violet|orchid|purple|indigo|bisque|sienna|maroon)$/i)||(n="#"+n),n}var t=$app,r=t.input,i=t.touch,u=window,e=$(document),o=Web.DataViewResources,s=t.clientRect,n=t.html,h=n.tag,c=n.div,l=n.span,a=n.$tag,v=n.$p,y=n.$div,p=n.$span,w=n.$a,b=n.$i,k=n.$li,d=n.$ul;r.methods.qrcode={_init:function(n,i,u,f){t.getScript("~/js/lib/qrcode.min.js",function(){QRCode.prototype.makeImage=function(){typeof this._oDrawing.makeImage=="function"&&this._oDrawing.makeImage()};r.methods.qrcode.makeCode(n,i,u,f)})},makeCode:function(n,t,r,e){var s=n.tagged(/input-qrcode-(size\-)?(\d+)x(\d+)/),l=s?parseInt(s[2]):128,a=s?parseInt(s[3]):128,v=n.tagged(/input-qrcode-color-dark-(\w+)/),y=n.tagged(/input-qrcode-color-light-(\w+)/),p=f(y?y[1]:"ffffff"),w=n.tagged(/input-qrcode-correct-level-(L|M|Q|H)/i),o,h,c;if(e.css({width:l,height:a,display:"inline-block",padding:$("body").is(".app-theme-dark")?5:1,"background-color":p}),t!=null)try{if(new QRCode(e.empty()[0],{text:r,width:l*Math.ceil(u.devicePixelRatio),height:a*Math.ceil(u.devicePixelRatio),colorDark:f(v?v[1]:"000000"),colorLight:p,correctLevel:QRCode.CorrectLevel[w?w[1].toUpperCase():"H"]}),n.is("input-qrcode-tooltip-hidden")&&e.removeAttr("title"),e.find("canvas").css("visibility","hidden"),o=e.css("visibility","").find("img").css({maxWidth:"100%",maxHeight:"100%"}),c=n.is("input-qrcode-scroll-into-view"),h=c?o.closest(".ui-page"):o.closest(".app-page-modal-fit-content"),h.length){c&&(i.pageInfo(h.attr("id")).autoFocus=!1);o.on("load",function(){!i.isInTransition()&&h.is(".ui-page-active")&&i.resetPageHeight();c&&i.scrollIntoView(o)})}}catch(b){e.text(b.message).css({display:"",width:""})}else e.parent().remove(),i.syncEmbeddedViews()}}})();